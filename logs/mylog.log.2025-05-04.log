2025-05-04 13:56:54 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 13:56:54 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 38180 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 13:56:54 -The following 1 profile is active: "dev"
2025-05-04 13:56:56 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 13:56:56 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 13:56:56 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 13:56:56 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 13:56:56 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 13:56:56 -Starting service [Tomcat]
2025-05-04 13:56:56 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 13:56:56 -Initializing Spring embedded WebApplicationContext
2025-05-04 13:56:56 -Root WebApplicationContext: initialization completed in 1889 ms
2025-05-04 13:57:18 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 13:57:18 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 13:57:18 -Attempting to connect to: [localhost:5672]
2025-05-04 13:57:19 -Created new connection: rabbitConnectionFactory#31940704:0/SimpleConnection@3f6906f4 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 52148]
2025-05-04 13:57:19 -Started ServiceApplication in 24.561 seconds (JVM running for 25.136)
2025-05-04 13:57:19 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 11892 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 13:57:19 -The following 1 profile is active: "dev"
2025-05-04 13:57:20 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 13:57:20 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 13:57:20 -Starting service [Tomcat]
2025-05-04 13:57:20 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 13:57:20 -Initializing Spring embedded WebApplicationContext
2025-05-04 13:57:20 -Root WebApplicationContext: initialization completed in 672 ms
2025-05-04 13:57:20 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 13:57:20 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 13:57:20 -Attempting to connect to: [localhost:5672]
2025-05-04 13:57:20 -Created new connection: rabbitConnectionFactory#6c2a95d5:0/SimpleConnection@5773d271 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 52153]
2025-05-04 13:57:20 -Started ImMessageStoreApplication in 1.789 seconds (JVM running for 2.372)
2025-05-04 14:00:36 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 14:00:36 -Initializing Servlet 'dispatcherServlet'
2025-05-04 14:00:36 -Completed initialization in 5 ms
2025-05-04 14:04:22 -HikariPool-1 - Starting...
2025-05-04 14:04:22 -HikariPool-1 - Start completed.
2025-05-04 14:04:22 -callback 之前 回调friend.add.before : 10000出现异常 ： org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8989 [/127.0.0.1] failed: Connection refused: connect 
2025-05-04 14:06:56 -callback 之前 回调friend.add.before : 10000出现异常 ： org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8989 [/127.0.0.1] failed: Connection refused: connect 
2025-05-04 14:10:11 -Waiting for workers to finish.
2025-05-04 14:10:12 -Successfully waited for workers to finish.
2025-05-04 14:10:12 -Shutdown ignored - container is already stopped
2025-05-04 14:10:12 -HikariPool-1 - Shutdown initiated...
2025-05-04 14:10:12 -HikariPool-1 - Shutdown completed.
2025-05-04 14:10:15 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 14:10:15 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 40136 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 14:10:15 -The following 1 profile is active: "dev"
2025-05-04 14:10:15 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 14:10:15 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 14:10:15 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 14:10:16 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 14:10:16 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 14:10:16 -Starting service [Tomcat]
2025-05-04 14:10:16 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 14:10:16 -Initializing Spring embedded WebApplicationContext
2025-05-04 14:10:16 -Root WebApplicationContext: initialization completed in 747 ms
2025-05-04 14:10:38 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 14:10:38 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 14:10:38 -Attempting to connect to: [localhost:5672]
2025-05-04 14:10:38 -Created new connection: rabbitConnectionFactory#5a13f1f7:0/SimpleConnection@2411b935 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 52445]
2025-05-04 14:10:38 -Started ServiceApplication in 23.21 seconds (JVM running for 24.116)
2025-05-04 14:10:42 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 14:10:42 -Initializing Servlet 'dispatcherServlet'
2025-05-04 14:10:42 -Completed initialization in 1 ms
2025-05-04 14:10:43 -HikariPool-1 - Starting...
2025-05-04 14:10:43 -HikariPool-1 - Start completed.
2025-05-04 14:10:43 -callback 之前 回调friend.add.before : 10000出现异常 ： org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8989 [/127.0.0.1] failed: Connection refused: connect 
2025-05-04 14:11:57 -callback 之前 回调friend.add.before : 10000出现异常 ： org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8989 [/127.0.0.1] failed: Connection refused: connect 
2025-05-04 14:12:02 -send message == {"appId":10000,"clientType":1,"command":3000,"data":{"toId":"lld2","sequence":1,"addSource":"","remark":"lld小号","fromId":"lld"},"imei":"2222","toId":"lld"}
2025-05-04 14:12:02 -send message == {"appId":10000,"clientType":1,"command":3000,"data":{"toId":"lld2","sequence":1,"addSource":"","remark":"lld小号","fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 14:12:02 -callback 之前 回调friend.add.after : 10000出现异常 ： org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:8989 [/127.0.0.1] failed: Connection refused: connect 
2025-05-04 14:18:59 -Waiting for workers to finish.
2025-05-04 14:19:00 -Successfully waited for workers to finish.
2025-05-04 14:19:00 -Shutdown ignored - container is already stopped
2025-05-04 14:19:00 -HikariPool-1 - Shutdown initiated...
2025-05-04 14:19:00 -HikariPool-1 - Shutdown completed.
2025-05-04 14:19:03 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 14:19:03 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 21484 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 14:19:03 -The following 1 profile is active: "dev"
2025-05-04 14:19:04 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 14:19:04 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 14:19:04 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 14:19:04 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 14:19:04 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 14:19:04 -Starting service [Tomcat]
2025-05-04 14:19:04 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 14:19:04 -Initializing Spring embedded WebApplicationContext
2025-05-04 14:19:04 -Root WebApplicationContext: initialization completed in 716 ms
2025-05-04 14:19:26 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 14:19:26 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 14:19:26 -Attempting to connect to: [localhost:5672]
2025-05-04 14:19:26 -Created new connection: rabbitConnectionFactory#76b305e1:0/SimpleConnection@7a8b7e11 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 52564]
2025-05-04 14:19:26 -Started ServiceApplication in 22.954 seconds (JVM running for 23.461)
2025-05-04 14:20:47 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 14:20:47 -Initializing Servlet 'dispatcherServlet'
2025-05-04 14:20:47 -Completed initialization in 1 ms
2025-05-04 14:20:48 -HikariPool-1 - Starting...
2025-05-04 14:20:48 -HikariPool-1 - Start completed.
2025-05-04 15:17:50 -Waiting for workers to finish.
2025-05-04 15:17:51 -Successfully waited for workers to finish.
2025-05-04 15:17:51 -Shutdown ignored - container is already stopped
2025-05-04 15:17:51 -HikariPool-1 - Shutdown initiated...
2025-05-04 15:17:51 -HikariPool-1 - Shutdown completed.
2025-05-04 15:18:01 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 15:18:01 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 36404 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 15:18:01 -The following 1 profile is active: "dev"
2025-05-04 15:18:01 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:18:01 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:18:01 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 15:18:02 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 15:18:02 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 15:18:02 -Starting service [Tomcat]
2025-05-04 15:18:02 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 15:18:02 -Initializing Spring embedded WebApplicationContext
2025-05-04 15:18:02 -Root WebApplicationContext: initialization completed in 1227 ms
2025-05-04 15:18:24 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 15:18:24 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 15:18:24 -Attempting to connect to: [localhost:5672]
2025-05-04 15:18:24 -Created new connection: rabbitConnectionFactory#7956f93a:0/SimpleConnection@71418a4a [delegate=amqp://guest@127.0.0.1:5672/, localPort= 53030]
2025-05-04 15:18:24 -Started ServiceApplication in 23.507 seconds (JVM running for 24.49)
2025-05-04 15:48:32 -Waiting for workers to finish.
2025-05-04 15:48:33 -Successfully waited for workers to finish.
2025-05-04 15:48:33 -Shutdown ignored - container is already stopped
2025-05-04 15:48:41 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 15:48:41 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 15312 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 15:48:41 -The following 1 profile is active: "dev"
2025-05-04 15:48:42 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:48:42 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:48:42 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 15:48:42 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 15:48:42 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 15:48:42 -Starting service [Tomcat]
2025-05-04 15:48:42 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 15:48:42 -Initializing Spring embedded WebApplicationContext
2025-05-04 15:48:42 -Root WebApplicationContext: initialization completed in 1118 ms
2025-05-04 15:49:04 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 15:49:04 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 15:49:04 -Attempting to connect to: [localhost:5672]
2025-05-04 15:49:04 -Created new connection: rabbitConnectionFactory#52b30054:0/SimpleConnection@2d2af12e [delegate=amqp://guest@127.0.0.1:5672/, localPort= 53381]
2025-05-04 15:49:04 -Started ServiceApplication in 23.398 seconds (JVM running for 24.364)
2025-05-04 15:49:05 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:49:05 -Initializing Servlet 'dispatcherServlet'
2025-05-04 15:49:05 -Completed initialization in 0 ms
2025-05-04 15:49:05 -HikariPool-1 - Starting...
2025-05-04 15:49:05 -HikariPool-1 - Start completed.
2025-05-04 15:50:50 -Waiting for workers to finish.
2025-05-04 15:50:50 -Successfully waited for workers to finish.
2025-05-04 15:50:50 -Shutdown ignored - container is already stopped
2025-05-04 15:50:50 -HikariPool-1 - Shutdown initiated...
2025-05-04 15:50:50 -HikariPool-1 - Shutdown completed.
2025-05-04 15:50:53 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 15:50:53 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 33648 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 15:50:53 -The following 1 profile is active: "dev"
2025-05-04 15:50:53 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:50:53 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:50:53 -Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-05-04 15:50:54 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 15:50:54 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 15:50:54 -Starting service [Tomcat]
2025-05-04 15:50:54 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 15:50:54 -Initializing Spring embedded WebApplicationContext
2025-05-04 15:50:54 -Root WebApplicationContext: initialization completed in 742 ms
2025-05-04 15:51:16 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 15:51:16 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 15:51:16 -Attempting to connect to: [localhost:5672]
2025-05-04 15:51:16 -Created new connection: rabbitConnectionFactory#7686f701:0/SimpleConnection@7028b5cc [delegate=amqp://guest@127.0.0.1:5672/, localPort= 53500]
2025-05-04 15:51:16 -Started ServiceApplication in 23.231 seconds (JVM running for 23.9)
2025-05-04 15:51:22 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:51:22 -Initializing Servlet 'dispatcherServlet'
2025-05-04 15:51:22 -Completed initialization in 1 ms
2025-05-04 15:51:22 -HikariPool-1 - Starting...
2025-05-04 15:51:22 -HikariPool-1 - Start completed.
2025-05-04 15:52:26 -HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m3s488ms562µs600ns).
2025-05-04 15:54:50 -HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m53s854ms893µs600ns).
2025-05-04 15:54:50 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"f31d0d97-8867-4055-8247-42229e2c0732","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:54:50 -Waiting for workers to finish.
2025-05-04 15:54:50 -Successfully waited for workers to finish.
2025-05-04 15:54:50 -msg ack,msgId=f31d0d97-8867-4055-8247-42229e2c0732,checkResut200
2025-05-04 15:54:50 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"f31d0d97-8867-4055-8247-42229e2c0732","messageSequence":1},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:54:50 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523702292481,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"f31d0d97-8867-4055-8247-42229e2c0732","messageSequence":1,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:54:50 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523702292481,"serverSend":true,"messageSequence":1,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:54:50 -Shutdown ignored - container is already stopped
2025-05-04 15:54:51 -HikariPool-1 - Shutdown initiated...
2025-05-04 15:54:51 -HikariPool-1 - Shutdown completed.
2025-05-04 15:54:54 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 15:54:54 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 41828 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 15:54:54 -The following 1 profile is active: "dev"
2025-05-04 15:54:54 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 15:54:54 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 15:54:54 -Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-05-04 15:54:54 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 15:54:54 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 15:54:54 -Starting service [Tomcat]
2025-05-04 15:54:54 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 15:54:54 -Initializing Spring embedded WebApplicationContext
2025-05-04 15:54:54 -Root WebApplicationContext: initialization completed in 809 ms
2025-05-04 15:55:17 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 15:55:17 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 15:55:17 -Attempting to connect to: [localhost:5672]
2025-05-04 15:55:17 -Created new connection: rabbitConnectionFactory#3316527e:0/SimpleConnection@642c5bb3 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 53650]
2025-05-04 15:55:17 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"521a701f-7ebd-4595-8f71-ae2178853096","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:55:17 -Started ServiceApplication in 23.292 seconds (JVM running for 23.919)
2025-05-04 15:55:17 -HikariPool-1 - Starting...
2025-05-04 15:55:17 -HikariPool-1 - Start completed.
2025-05-04 15:55:17 -msg ack,msgId=521a701f-7ebd-4595-8f71-ae2178853096,checkResut200
2025-05-04 15:55:17 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"521a701f-7ebd-4595-8f71-ae2178853096","messageSequence":2},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:55:17 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523758915585,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"521a701f-7ebd-4595-8f71-ae2178853096","messageSequence":2,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:55:17 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523758915585,"serverSend":true,"messageSequence":2,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:55:20 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 15:55:20 -Initializing Servlet 'dispatcherServlet'
2025-05-04 15:55:20 -Completed initialization in 1 ms
2025-05-04 15:55:20 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"1eb3f8aa-a815-4f78-a61c-d0ef347d2a9d","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:55:20 -msg ack,msgId=1eb3f8aa-a815-4f78-a61c-d0ef347d2a9d,checkResut200
2025-05-04 15:55:20 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"1eb3f8aa-a815-4f78-a61c-d0ef347d2a9d","messageSequence":3},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:55:20 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523765207041,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"1eb3f8aa-a815-4f78-a61c-d0ef347d2a9d","messageSequence":3,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:55:20 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523765207041,"serverSend":true,"messageSequence":3,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:49 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"02ca4ab6-080c-4a53-984a-1d6b6fb3b385","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:49 -msg ack,msgId=02ca4ab6-080c-4a53-984a-1d6b6fb3b385,checkResut200
2025-05-04 15:56:49 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"02ca4ab6-080c-4a53-984a-1d6b6fb3b385","messageSequence":4},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:49 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523951853569,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"02ca4ab6-080c-4a53-984a-1d6b6fb3b385","messageSequence":4,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:49 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523951853569,"serverSend":true,"messageSequence":4,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"cad2bd70-ee5b-4195-8104-682d14d742ce","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:50 -msg ack,msgId=cad2bd70-ee5b-4195-8104-682d14d742ce,checkResut200
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"cad2bd70-ee5b-4195-8104-682d14d742ce","messageSequence":5},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523953950721,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"cad2bd70-ee5b-4195-8104-682d14d742ce","messageSequence":5,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523953950721,"serverSend":true,"messageSequence":5,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"7d83969a-6059-4153-80db-cb62fb808592","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:50 -msg ack,msgId=7d83969a-6059-4153-80db-cb62fb808592,checkResut200
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"7d83969a-6059-4153-80db-cb62fb808592","messageSequence":6},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523953950722,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"7d83969a-6059-4153-80db-cb62fb808592","messageSequence":6,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523953950722,"serverSend":true,"messageSequence":6,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"b2840c02-217d-477d-b2f3-2904823c6f75","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:50 -msg ack,msgId=b2840c02-217d-477d-b2f3-2904823c6f75,checkResut200
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"b2840c02-217d-477d-b2f3-2904823c6f75","messageSequence":7},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523953950723,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"b2840c02-217d-477d-b2f3-2904823c6f75","messageSequence":7,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523953950723,"serverSend":true,"messageSequence":7,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"cdab49c3-916b-46ca-979a-20422b0d3ae5","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:50 -msg ack,msgId=cdab49c3-916b-46ca-979a-20422b0d3ae5,checkResut200
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"cdab49c3-916b-46ca-979a-20422b0d3ae5","messageSequence":8},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523953950724,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"cdab49c3-916b-46ca-979a-20422b0d3ae5","messageSequence":8,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:50 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523953950724,"serverSend":true,"messageSequence":8,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:51 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"b59df6e8-42b1-4f53-8d3f-0558c82a9bb8","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:51 -msg ack,msgId=b59df6e8-42b1-4f53-8d3f-0558c82a9bb8,checkResut200
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"b59df6e8-42b1-4f53-8d3f-0558c82a9bb8","messageSequence":9},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523956047873,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"b59df6e8-42b1-4f53-8d3f-0558c82a9bb8","messageSequence":9,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523956047873,"serverSend":true,"messageSequence":9,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 15:56:51 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"123123","appId":10000,"messageId":"94f12c9f-8955-4aab-8a18-f35b318c0460","imei":"2222","fromId":"lld","command":1103}
2025-05-04 15:56:51 -msg ack,msgId=94f12c9f-8955-4aab-8a18-f35b318c0460,checkResut200
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"94f12c9f-8955-4aab-8a18-f35b318c0460","messageSequence":10},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419523956047874,"clientType":1,"messageBody":"123123","appId":10000,"imei":"2222","messageId":"94f12c9f-8955-4aab-8a18-f35b318c0460","messageSequence":10,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 15:56:51 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419523956047874,"serverSend":true,"messageSequence":10,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 16:35:09 -Waiting for workers to finish.
2025-05-04 16:35:10 -Successfully waited for workers to finish.
2025-05-04 16:35:10 -Shutdown ignored - container is already stopped
2025-05-04 16:35:10 -HikariPool-1 - Shutdown initiated...
2025-05-04 16:35:10 -HikariPool-1 - Shutdown completed.
2025-05-04 16:35:15 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 16:35:15 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 17300 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 16:35:15 -The following 1 profile is active: "dev"
2025-05-04 16:35:15 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 16:35:15 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 16:35:15 -Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-05-04 16:35:16 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 16:35:16 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 16:35:16 -Starting service [Tomcat]
2025-05-04 16:35:16 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 16:35:16 -Initializing Spring embedded WebApplicationContext
2025-05-04 16:35:16 -Root WebApplicationContext: initialization completed in 783 ms
2025-05-04 16:35:33 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 16:35:33 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 16:35:33 -Attempting to connect to: [localhost:5672]
2025-05-04 16:35:33 -Created new connection: rabbitConnectionFactory#efe49ab:0/SimpleConnection@51297528 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 54536]
2025-05-04 16:35:33 -Started ServiceApplication in 18.677 seconds (JVM running for 19.206)
2025-05-04 16:36:08 -CHAT MSG FROM QUEUE :::::{"clientType":1,"appId":10000,"imei":"2222","userId":"lld","command":4001,"status":1}
2025-05-04 16:36:08 -send message == {"appId":10000,"clientType":1,"command":4005,"data":{"appId":10000,"client":[{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"2222","connectState":1,"userId":"lld"},{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"12313","connectState":1,"userId":"lld"}],"userId":"lld","status":1},"imei":"12313","toId":"lld"}
2025-05-04 16:36:08 -HikariPool-1 - Starting...
2025-05-04 16:36:08 -HikariPool-1 - Start completed.
2025-05-04 16:37:08 -CHAT MSG FROM QUEUE :::::{"clientType":1,"appId":10000,"imei":"10000","userId":"lld2","command":4001,"status":1}
2025-05-04 16:37:08 -send message == {"appId":10000,"clientType":1,"command":4004,"data":{"appId":10000,"client":[{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"10000","connectState":1,"userId":"lld2"}],"userId":"lld2","status":1},"imei":"2222","toId":"lld"}
2025-05-04 16:37:08 -send message == {"appId":10000,"clientType":1,"command":4004,"data":{"appId":10000,"client":[{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"10000","connectState":1,"userId":"lld2"}],"userId":"lld2","status":1},"imei":"12313","toId":"lld"}
2025-05-04 16:38:23 -CHAT MSG FROM QUEUE :::::{"clientType":1,"appId":10000,"imei":"2222","userId":"lld","command":4001,"status":1}
2025-05-04 16:38:23 -send message == {"appId":10000,"clientType":1,"command":4005,"data":{"appId":10000,"client":[{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"2222","connectState":1,"userId":"lld"},{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"12313","connectState":1,"userId":"lld"}],"userId":"lld","status":1},"imei":"12313","toId":"lld"}
2025-05-04 16:38:23 -send message == {"appId":10000,"clientType":1,"command":4004,"data":{"appId":10000,"client":[{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"2222","connectState":1,"userId":"lld"},{"brokerId":1000,"clientType":1,"appId":10000,"brokerHost":"172.27.176.44","imei":"12313","connectState":1,"userId":"lld"}],"userId":"lld","status":1},"imei":"10000","toId":"lld2"}
2025-05-04 16:47:00 -Waiting for workers to finish.
2025-05-04 16:47:00 -Waiting for workers to finish.
2025-05-04 16:47:00 -Successfully waited for workers to finish.
2025-05-04 16:47:01 -Successfully waited for workers to finish.
2025-05-04 16:47:01 -Shutdown ignored - container is already stopped
2025-05-04 16:47:01 -Shutdown ignored - container is already stopped
2025-05-04 16:47:01 -HikariPool-1 - Shutdown initiated...
2025-05-04 16:47:01 -HikariPool-1 - Shutdown completed.
2025-05-04 16:47:04 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 16:47:04 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 7976 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 16:47:04 -The following 1 profile is active: "dev"
2025-05-04 16:47:05 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 16:47:05 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 16:47:05 -Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-05-04 16:47:05 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 16:47:05 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 16:47:05 -Starting service [Tomcat]
2025-05-04 16:47:05 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 16:47:05 -Initializing Spring embedded WebApplicationContext
2025-05-04 16:47:05 -Root WebApplicationContext: initialization completed in 759 ms
2025-05-04 16:47:26 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 16:47:26 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 16:47:26 -Attempting to connect to: [localhost:5672]
2025-05-04 16:47:26 -Created new connection: rabbitConnectionFactory#efe49ab:0/SimpleConnection@51297528 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 55118]
2025-05-04 16:47:26 -Started ServiceApplication in 21.611 seconds (JVM running for 22.196)
2025-05-04 16:47:46 -CHAT MSG FROM QUEUE :::::{"clientType":1,"appId":10000,"imei":"2222","userId":"lld3","command":4001,"status":1}
2025-05-04 16:47:46 -HikariPool-1 - Starting...
2025-05-04 16:47:46 -HikariPool-1 - Start completed.
2025-05-04 16:53:05 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 16:53:05 -Initializing Servlet 'dispatcherServlet'
2025-05-04 16:53:05 -Completed initialization in 1 ms
2025-05-04 16:53:05 -send message == {"appId":10000,"clientType":1,"command":4005,"data":{"customStatus":1,"customText":"在线","userId":"lld"},"imei":"2222","toId":"lld"}
2025-05-04 16:53:05 -send message == {"appId":10000,"clientType":1,"command":4005,"data":{"customStatus":1,"customText":"在线","userId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 16:53:05 -send message == {"appId":10000,"clientType":1,"command":4004,"data":{"customStatus":1,"customText":"在线","userId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:00:49 -Waiting for workers to finish.
2025-05-04 17:00:49 -Waiting for workers to finish.
2025-05-04 17:00:50 -Successfully waited for workers to finish.
2025-05-04 17:00:50 -Successfully waited for workers to finish.
2025-05-04 17:00:50 -Shutdown ignored - container is already stopped
2025-05-04 17:00:50 -Shutdown ignored - container is already stopped
2025-05-04 17:00:50 -HikariPool-1 - Shutdown initiated...
2025-05-04 17:00:50 -HikariPool-1 - Shutdown completed.
2025-05-04 17:00:53 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 17:00:53 -Starting ServiceApplication using Java 11.0.24 on llleee with PID 36144 (D:\aaa\im-system\service\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:00:53 -The following 1 profile is active: "dev"
2025-05-04 17:00:53 -Multiple Spring Data modules found, entering strict repository configuration mode
2025-05-04 17:00:53 -Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-05-04 17:00:53 -Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-05-04 17:00:53 -Tomcat initialized with port(s): 8000 (http)
2025-05-04 17:00:53 -Initializing ProtocolHandler ["http-nio-8000"]
2025-05-04 17:00:53 -Starting service [Tomcat]
2025-05-04 17:00:53 -Starting Servlet engine: [Apache Tomcat/9.0.75]
2025-05-04 17:00:53 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:00:53 -Root WebApplicationContext: initialization completed in 707 ms
2025-05-04 17:00:59 -Waiting for workers to finish.
2025-05-04 17:00:59 -Successfully waited for workers to finish.
2025-05-04 17:00:59 -Shutdown ignored - container is already stopped
2025-05-04 17:01:02 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 35088 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:01:02 -The following 1 profile is active: "dev"
2025-05-04 17:01:03 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 17:01:03 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 17:01:03 -Starting service [Tomcat]
2025-05-04 17:01:03 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 17:01:03 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:01:03 -Root WebApplicationContext: initialization completed in 505 ms
2025-05-04 17:01:04 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 17:01:04 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 17:01:04 -Attempting to connect to: [localhost:5672]
2025-05-04 17:01:04 -Created new connection: rabbitConnectionFactory#5fdd97c1:0/SimpleConnection@65d9e72a [delegate=amqp://guest@127.0.0.1:5672/, localPort= 55862]
2025-05-04 17:01:04 -Started ImMessageStoreApplication in 1.522 seconds (JVM running for 2.774)
2025-05-04 17:01:15 -Starting ProtocolHandler ["http-nio-8000"]
2025-05-04 17:01:15 -Tomcat started on port(s): 8000 (http) with context path ''
2025-05-04 17:01:15 -Attempting to connect to: [localhost:5672]
2025-05-04 17:01:15 -Created new connection: rabbitConnectionFactory#6be766d1:0/SimpleConnection@188bf4d8 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 55882]
2025-05-04 17:01:15 -Started ServiceApplication in 23.014 seconds (JVM running for 23.54)
2025-05-04 17:01:30 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 17:01:30 -Initializing Servlet 'dispatcherServlet'
2025-05-04 17:01:30 -Completed initialization in 0 ms
2025-05-04 17:01:30 -HikariPool-1 - Starting...
2025-05-04 17:01:30 -HikariPool-1 - Start completed.
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:01:31 -msg ack,msgId=9726e7bf-6cc7-43e6-8112-6943c67f1b6c,checkResut200
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","messageSequence":11},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997633,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","messageSequence":11,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997633,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","messageSequence":11,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532092997633,"clientType":1,"appId":10000,"messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","imei":"10000","messageSequence":11,"fromId":"lld2","command":1107}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997633,"clientType":1,"appId":10000,"imei":"10000","messageSequence":11,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997633,"clientType":1,"appId":10000,"imei":"10000","messageSequence":11,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":11,"fromId":"lld2","command":1106}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":11,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":11,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"846ea3f3-db74-4a38-a973-f400810841a1","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:01:31 -msg ack,msgId=846ea3f3-db74-4a38-a973-f400810841a1,checkResut200
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"846ea3f3-db74-4a38-a973-f400810841a1","messageSequence":12},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997634,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"846ea3f3-db74-4a38-a973-f400810841a1","messageSequence":12,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997634,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"846ea3f3-db74-4a38-a973-f400810841a1","messageSequence":12,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532092997634,"clientType":1,"appId":10000,"messageId":"846ea3f3-db74-4a38-a973-f400810841a1","imei":"10000","messageSequence":12,"fromId":"lld2","command":1107}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997634,"clientType":1,"appId":10000,"imei":"10000","messageSequence":12,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997634,"clientType":1,"appId":10000,"imei":"10000","messageSequence":12,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":12,"fromId":"lld2","command":1106}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":12,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":12,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"420aaa4f-b13f-433b-939b-238af3a01090","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:01:31 -msg ack,msgId=420aaa4f-b13f-433b-939b-238af3a01090,checkResut200
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"420aaa4f-b13f-433b-939b-238af3a01090","messageSequence":13},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997635,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"420aaa4f-b13f-433b-939b-238af3a01090","messageSequence":13,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532092997635,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"420aaa4f-b13f-433b-939b-238af3a01090","messageSequence":13,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532092997635,"clientType":1,"appId":10000,"messageId":"420aaa4f-b13f-433b-939b-238af3a01090","imei":"10000","messageSequence":13,"fromId":"lld2","command":1107}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997635,"clientType":1,"appId":10000,"imei":"10000","messageSequence":13,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532092997635,"clientType":1,"appId":10000,"imei":"10000","messageSequence":13,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:01:31 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":13,"fromId":"lld2","command":1106}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":13,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:01:31 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":13,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:02:55 -Waiting for workers to finish.
2025-05-04 17:02:55 -Successfully waited for workers to finish.
2025-05-04 17:02:55 -Shutdown ignored - container is already stopped
2025-05-04 17:02:58 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 38792 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:02:58 -The following 1 profile is active: "dev"
2025-05-04 17:02:58 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 17:02:58 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 17:02:58 -Starting service [Tomcat]
2025-05-04 17:02:58 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 17:02:58 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:02:58 -Root WebApplicationContext: initialization completed in 473 ms
2025-05-04 17:02:59 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 17:02:59 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 17:02:59 -Attempting to connect to: [localhost:5672]
2025-05-04 17:02:59 -Created new connection: rabbitConnectionFactory#1de13f34:0/SimpleConnection@11bfffb3 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 56026]
2025-05-04 17:02:59 -Started ImMessageStoreApplication in 1.517 seconds (JVM running for 1.995)
2025-05-04 17:03:07 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:03:07 -msg ack,msgId=6b49714f-1b0f-4866-8dd0-554296e87a4f,checkResut200
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","messageSequence":14},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532294324225,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","messageSequence":14,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532294324225,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","messageSequence":14,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:03:07 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532294324225,"clientType":1,"appId":10000,"messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","imei":"10000","messageSequence":14,"fromId":"lld2","command":1107}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532294324225,"clientType":1,"appId":10000,"imei":"10000","messageSequence":14,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532294324225,"clientType":1,"appId":10000,"imei":"10000","messageSequence":14,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:07 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":14,"fromId":"lld2","command":1106}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":14,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:07 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":14,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:08 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:03:08 -msg ack,msgId=f8a13de9-ca87-4c6f-a9ed-17683608cad9,checkResut200
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","messageSequence":15},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532296421377,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","messageSequence":15,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532296421377,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","messageSequence":15,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:03:08 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532296421377,"clientType":1,"appId":10000,"messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","imei":"10000","messageSequence":15,"fromId":"lld2","command":1107}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532296421377,"clientType":1,"appId":10000,"imei":"10000","messageSequence":15,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532296421377,"clientType":1,"appId":10000,"imei":"10000","messageSequence":15,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:08 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":15,"fromId":"lld2","command":1106}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":15,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:08 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":15,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:09 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:03:09 -msg ack,msgId=3b90ba5e-e5f3-4b32-95f3-9deb06e07c57,checkResut200
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","messageSequence":16},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532298518529,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","messageSequence":16,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532298518529,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","messageSequence":16,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:03:09 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532298518529,"clientType":1,"appId":10000,"messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","imei":"10000","messageSequence":16,"fromId":"lld2","command":1107}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532298518529,"clientType":1,"appId":10000,"imei":"10000","messageSequence":16,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532298518529,"clientType":1,"appId":10000,"imei":"10000","messageSequence":16,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:09 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":16,"fromId":"lld2","command":1106}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":16,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:09 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":16,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:13 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:03:13 -msg ack,msgId=23e3b5f7-0f78-4aa7-8da8-223ce5268b65,checkResut200
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","messageSequence":17},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532306907137,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","messageSequence":17,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532306907137,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","messageSequence":17,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:03:13 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532306907137,"clientType":1,"appId":10000,"messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","imei":"10000","messageSequence":17,"fromId":"lld2","command":1107}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532306907137,"clientType":1,"appId":10000,"imei":"10000","messageSequence":17,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532306907137,"clientType":1,"appId":10000,"imei":"10000","messageSequence":17,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:03:13 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":17,"fromId":"lld2","command":1106}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":17,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:03:13 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":17,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:21 -Waiting for workers to finish.
2025-05-04 17:05:22 -Successfully waited for workers to finish.
2025-05-04 17:05:22 -Shutdown ignored - container is already stopped
2025-05-04 17:05:25 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 29136 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:05:25 -The following 1 profile is active: "dev"
2025-05-04 17:05:26 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 17:05:26 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 17:05:26 -Starting service [Tomcat]
2025-05-04 17:05:26 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 17:05:26 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:05:26 -Root WebApplicationContext: initialization completed in 505 ms
2025-05-04 17:05:27 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 17:05:27 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 17:05:27 -Attempting to connect to: [localhost:5672]
2025-05-04 17:05:27 -Created new connection: rabbitConnectionFactory#255d9277:0/SimpleConnection@58164e9a [delegate=amqp://guest@127.0.0.1:5672/, localPort= 56150]
2025-05-04 17:05:27 -Started ImMessageStoreApplication in 1.546 seconds (JVM running for 2.023)
2025-05-04 17:05:34 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:05:34 -msg ack,msgId=e7133deb-64c5-4a48-8a81-ca837feff634,checkResut200
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","messageSequence":18},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532602605569,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","messageSequence":18,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532602605569,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","messageSequence":18,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:05:34 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532602605569,"clientType":1,"appId":10000,"messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","imei":"10000","messageSequence":18,"fromId":"lld2","command":1107}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532602605569,"clientType":1,"appId":10000,"imei":"10000","messageSequence":18,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532602605569,"clientType":1,"appId":10000,"imei":"10000","messageSequence":18,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:34 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":18,"fromId":"lld2","command":1106}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":18,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:34 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":18,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:40 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:05:40 -msg ack,msgId=e71f8ec1-6d12-4b23-abf6-32137271b19c,checkResut200
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","messageSequence":19},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532615188481,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","messageSequence":19,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532615188481,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","messageSequence":19,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:05:40 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532615188481,"clientType":1,"appId":10000,"messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","imei":"10000","messageSequence":19,"fromId":"lld2","command":1107}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532615188481,"clientType":1,"appId":10000,"imei":"10000","messageSequence":19,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532615188481,"clientType":1,"appId":10000,"imei":"10000","messageSequence":19,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:40 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":19,"fromId":"lld2","command":1106}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":19,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:40 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":19,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:41 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:05:41 -msg ack,msgId=5e525f71-9368-4f6b-8986-1c3868d16b2c,checkResut200
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","messageSequence":20},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532617285633,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","messageSequence":20,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419532617285633,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","messageSequence":20,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:05:41 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419532617285633,"clientType":1,"appId":10000,"messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","imei":"10000","messageSequence":20,"fromId":"lld2","command":1107}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532617285633,"clientType":1,"appId":10000,"imei":"10000","messageSequence":20,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419532617285633,"clientType":1,"appId":10000,"imei":"10000","messageSequence":20,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:05:41 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":20,"fromId":"lld2","command":1106}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":20,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:05:41 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":20,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:20:19 -Waiting for workers to finish.
2025-05-04 17:20:19 -Successfully waited for workers to finish.
2025-05-04 17:20:19 -Shutdown ignored - container is already stopped
2025-05-04 17:20:22 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 6284 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:20:22 -The following 1 profile is active: "dev"
2025-05-04 17:20:23 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 17:20:23 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 17:20:23 -Starting service [Tomcat]
2025-05-04 17:20:23 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 17:20:23 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:20:23 -Root WebApplicationContext: initialization completed in 453 ms
2025-05-04 17:20:23 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 17:20:23 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 17:20:23 -Attempting to connect to: [localhost:5672]
2025-05-04 17:20:23 -Created new connection: rabbitConnectionFactory#226d5af0:0/SimpleConnection@570b2057 [delegate=amqp://guest@127.0.0.1:5672/, localPort= 56848]
2025-05-04 17:20:23 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746257509578,"delFlag":0,"messageBody":"ssssss","messageKey":419339612192769,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339612192769,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:23 -Started ImMessageStoreApplication in 1.515 seconds (JVM running for 1.981)
2025-05-04 17:20:23 -HikariPool-1 - Starting...
2025-05-04 17:20:24 -HikariPool-1 - Start completed.
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746257509578,"delFlag":0,"messageBody":"ssssss","messageKey":419339612192769,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339612192769,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746257515765,"delFlag":0,"messageBody":"ssssss","messageKey":419339624775681,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339624775681,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746257515765,"delFlag":0,"messageBody":"ssssss","messageKey":419339624775681,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339624775681,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746257517066,"delFlag":0,"messageBody":"ssssss","messageKey":419339628969985,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339628969985,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746257517066,"delFlag":0,"messageBody":"ssssss","messageKey":419339628969985,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419339628969985,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262125461,"delFlag":0,"messageBody":"ssssss","messageKey":419349292646401,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349292646401,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262125461,"delFlag":0,"messageBody":"ssssss","messageKey":419349292646401,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349292646401,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262145529,"delFlag":0,"messageBody":"ssssss","messageKey":419349334589441,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349334589441,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262145529,"delFlag":0,"messageBody":"ssssss","messageKey":419349334589441,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349334589441,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262182043,"delFlag":0,"messageBody":"ssssss","messageKey":419349412184065,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349412184065,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262182043,"delFlag":0,"messageBody":"ssssss","messageKey":419349412184065,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349412184065,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262205308,"delFlag":0,"messageBody":"ssssss","messageKey":419349460418561,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349460418561,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262205308,"delFlag":0,"messageBody":"ssssss","messageKey":419349460418561,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349460418561,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262212206,"delFlag":0,"messageBody":"ssssss","messageKey":419349475098625,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349475098625,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262212206,"delFlag":0,"messageBody":"ssssss","messageKey":419349475098625,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"ssssss","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349475098625,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746262308680,"delFlag":0,"messageBody":"666","messageKey":419349676425217,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349676425217,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746262308680,"delFlag":0,"messageBody":"666","messageKey":419349676425217,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419349676425217,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267787929,"delFlag":0,"messageBody":"666","messageKey":419361166721025,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361166721025,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267787929,"delFlag":0,"messageBody":"666","messageKey":419361166721025,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361166721025,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267845105,"delFlag":0,"messageBody":"666","messageKey":419361288355841,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361288355841,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267845105,"delFlag":0,"messageBody":"666","messageKey":419361288355841,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361288355841,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267850589,"delFlag":0,"messageBody":"666","messageKey":419361298841601,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361298841601,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267850589,"delFlag":0,"messageBody":"666","messageKey":419361298841601,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361298841601,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267938356,"delFlag":0,"messageBody":"666","messageKey":419361483390977,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361483390977,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267941968,"delFlag":0,"messageBody":"666","messageKey":419361489682433,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361489682433,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267938356,"delFlag":0,"messageBody":"666","messageKey":419361483390977,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361483390977,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267941968,"delFlag":0,"messageBody":"666","messageKey":419361489682433,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361489682433,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267942681,"delFlag":0,"messageBody":"666","messageKey":419361491779585,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361491779585,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267943277,"delFlag":0,"messageBody":"666","messageKey":419361493876737,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361493876737,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267942681,"delFlag":0,"messageBody":"666","messageKey":419361491779585,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361491779585,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267945360,"delFlag":0,"messageBody":"666","messageKey":419361498071041,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361498071041,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 52 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267943277,"delFlag":0,"messageBody":"666","messageKey":419361493876737,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361493876737,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267983267,"delFlag":0,"messageBody":"666","messageKey":419361577762817,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361577762817,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267945360,"delFlag":0,"messageBody":"666","messageKey":419361498071041,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361498071041,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746267984403,"delFlag":0,"messageBody":"666","messageKey":419361579859969,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361579859969,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267983267,"delFlag":0,"messageBody":"666","messageKey":419361577762817,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361577762817,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746269465602,"delFlag":0,"messageBody":"666","messageKey":419364685742081,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419364685742081,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746269465602,"delFlag":0,"messageBody":"666","messageKey":419364685742081,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419364685742081,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746267984403,"delFlag":0,"messageBody":"666","messageKey":419361579859969,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419361579859969,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746269615257,"delFlag":0,"messageBody":"666","messageKey":419365000314881,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419365000314881,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746269615964,"delFlag":0,"messageBody":"666","messageKey":419365000314882,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419365000314882,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746269615964,"delFlag":0,"messageBody":"666","messageKey":419365000314882,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419365000314882,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746269615257,"delFlag":0,"messageBody":"666","messageKey":419365000314881,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419365000314881,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746279632403,"delFlag":0,"messageBody":"666","messageKey":419386007486465,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386007486465,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746279087626,"delFlag":0,"messageBody":"666","messageKey":419384864538625,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419384864538625,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746279632403,"delFlag":0,"messageBody":"666","messageKey":419386007486465,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386007486465,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746279087626,"delFlag":0,"messageBody":"666","messageKey":419384864538625,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419384864538625,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746279666104,"delFlag":0,"messageBody":"666","messageKey":419386078789633,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386078789633,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746279657845,"delFlag":0,"messageBody":"666","messageKey":419386059915265,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386059915265,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746279666104,"delFlag":0,"messageBody":"666","messageKey":419386078789633,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386078789633,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746279657845,"delFlag":0,"messageBody":"666","messageKey":419386059915265,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386059915265,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280141639,"delFlag":0,"messageBody":"666","messageKey":419387074936833,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387074936833,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746279671288,"delFlag":0,"messageBody":"666","messageKey":419386089275393,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386089275393,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746279671288,"delFlag":0,"messageBody":"666","messageKey":419386089275393,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419386089275393,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746280141639,"delFlag":0,"messageBody":"666","messageKey":419387074936833,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387074936833,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280473998,"delFlag":0,"messageBody":"666","messageKey":419387771191297,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387771191297,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280143388,"delFlag":0,"messageBody":"666","messageKey":419387079131137,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387079131137,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746280473998,"delFlag":0,"messageBody":"666","messageKey":419387771191297,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387771191297,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746280143388,"delFlag":0,"messageBody":"666","messageKey":419387079131137,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419387079131137,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280489315,"delFlag":0,"messageBody":"123","messageKey":419387804745729,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"lld","messageBody":"123","messageId":"53ed2ad5-9f4e-43eb-8938-58e1d1478691","messageKey":419387804745729,"messageSequence":1,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280490759,"delFlag":0,"messageBody":"123","messageKey":419387806842881,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"lld","messageBody":"123","messageId":"9996ad70-5f31-47ac-b05c-e7fff8f44010","messageKey":419387806842881,"messageSequence":2,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280504879,"delFlag":0,"messageBody":"123","messageKey":419387836203009,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"lld","messageBody":"123","messageId":"339b79c2-d996-4292-8eea-8d5fcdc910bf","messageKey":419387836203009,"messageSequence":3,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280557237,"delFlag":0,"messageBody":"123","messageKey":419387947352065,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"lld","messageBody":"123","messageId":"c9184e11-4d9d-4e4c-8920-f8d111e845e8","messageKey":419387947352065,"messageSequence":4,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280692484,"delFlag":0,"messageBody":"123","messageKey":419388230467585,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"8e14bfce-2ebc-44f3-802d-328c2087e0af","messageKey":419388230467585,"messageSequence":5,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280883805,"delFlag":0,"messageBody":"123","messageKey":419388631023617,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"fb1597fd-89fb-4e17-a1ed-9e0622939d7a","messageKey":419388631023617,"messageSequence":6,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280885190,"delFlag":0,"messageBody":"123","messageKey":419388635217921,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"3feca212-10bf-4c7d-9a6e-6eb7794288e4","messageKey":419388635217921,"messageSequence":7,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280886101,"delFlag":0,"messageBody":"123","messageKey":419388637315073,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"8ace369a-c6cb-4f66-8b8a-4aa70452b2f3","messageKey":419388637315073,"messageSequence":8,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280891645,"delFlag":0,"messageBody":"123","messageKey":419388647800833,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"68d34ad2-656c-48c6-9999-98e976ac6d4f","messageKey":419388647800833,"messageSequence":9,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280893525,"delFlag":0,"messageBody":"123","messageKey":419388651995137,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"774d1b98-c9ce-498a-8085-7eba04109e17","messageKey":419388651995137,"messageSequence":10,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280900930,"delFlag":0,"messageBody":"123","messageKey":419388666675201,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"a4349457-2b68-412f-9374-a28318c27db3","messageKey":419388666675201,"messageSequence":11,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280901736,"delFlag":0,"messageBody":"123","messageKey":419388668772353,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"97a2eb79-96c8-4601-8e8c-757972150742","messageKey":419388668772353,"messageSequence":12,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746280916575,"delFlag":0,"messageBody":"123","messageKey":419388700229633,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"6341805f-c4fa-48ae-84d4-40187e0b040b","messageKey":419388700229633,"messageSequence":13,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281303494,"delFlag":0,"messageBody":"213","messageKey":419389511827457,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"81c82bfc-81c7-44e0-a2f7-b26ef7e8bef0","messageKey":419389511827457,"messageSequence":14,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281323805,"delFlag":0,"messageBody":"213","messageKey":419389553770497,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"e2dcbac6-640b-4af3-96d6-3b70dd7199c3","messageKey":419389553770497,"messageSequence":15,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281324760,"delFlag":0,"messageBody":"213","messageKey":419389555867649,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"39ef3e44-878f-4cd8-a260-14a33c2f302c","messageKey":419389555867649,"messageSequence":16,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281398865,"delFlag":0,"messageBody":"213","messageKey":419389711056897,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"13a03d95-2ccd-4687-8a57-4703837eb9b4","messageKey":419389711056897,"messageSequence":17,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281522470,"delFlag":0,"messageBody":"213","messageKey":419389971103745,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"d1c15ca9-628c-47f7-b3d6-094c2ce67b8e","messageKey":419389971103745,"messageSequence":18,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281524149,"delFlag":0,"messageBody":"213","messageKey":419389975298049,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"2c3b8058-56e9-484b-8f55-53768afb35ea","messageKey":419389975298049,"messageSequence":19,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281540437,"delFlag":0,"messageBody":"213","messageKey":419390008852481,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"14468b92-a609-4bac-89da-56fbf33a8844","messageKey":419390008852481,"messageSequence":20,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281843610,"delFlag":0,"messageBody":"213","messageKey":419390644289537,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"14af0fc2-7832-4895-99be-b8f0d844691f","messageKey":419390644289537,"messageSequence":21,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281862292,"delFlag":0,"messageBody":"213","messageKey":419390684135425,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"53c3ebc7-f858-4108-880f-0d92640cca73","messageKey":419390684135425,"messageSequence":22,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281879095,"delFlag":0,"messageBody":"213","messageKey":419390719787009,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"69115226-8bbb-48f6-99fa-c5508ff3400e","messageKey":419390719787009,"messageSequence":23,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281910208,"delFlag":0,"messageBody":"213","messageKey":419390784798721,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"1daa291f-b6a0-4ecd-82af-16fe4d8bdd8c","messageKey":419390784798721,"messageSequence":24,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281939755,"delFlag":0,"messageBody":"213","messageKey":419390845616129,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"213","messageId":"f70f6bef-1b72-4abc-81df-ac5ea9060627","messageKey":419390845616129,"messageSequence":25,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281942908,"delFlag":0,"messageBody":"666","messageKey":419390851907585,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390851907585,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746281942908,"delFlag":0,"messageBody":"666","messageKey":419390851907585,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390851907585,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281957216,"delFlag":0,"messageBody":"666","messageKey":419390883364865,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390883364865,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746281994689,"delFlag":0,"messageBody":"666","messageKey":419390960959489,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390960959489,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746281957216,"delFlag":0,"messageBody":"666","messageKey":419390883364865,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390883364865,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -处理消息出现异常：
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282012379,"delFlag":0,"messageBody":"123","messageKey":419390998708225,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"85788b9d-e9e2-4aa9-af40-d2b357371859","messageKey":419390998708225,"messageSequence":26,"toId":"lld2"}}
2025-05-04 17:20:24 -RMQ_CHAT_TRAN_ERROR
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
### The error may exist in com/lld/message/dao/mapper/ImMessageHistoryMapper.java (best guess)
### The error may involve com.lld.message.dao.mapper.ImMessageHistoryMapper.insertBatchSomeColumn-Inline
### The error occurred while setting parameters
### SQL: INSERT INTO im_message_history (app_id,from_id,to_id,owner_id,message_key,sequence,message_random,message_time,create_time) VALUES    (?,?,?,?,?,?,?,?,?)  ,  (?,?,?,?,?,?,?,?,?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
; Column 'to_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy64.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:271)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:60)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at com.sun.proxy.$Proxy67.insertBatchSomeColumn(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy68.insertBatchSomeColumn(Unknown Source)
	at com.lld.message.service.StoreMessageService.doStoreP2PMessage(StoreMessageService.java:43)
	at com.lld.message.service.StoreMessageService$$FastClassBySpringCGLIB$$cc1e9038.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.lld.message.service.StoreMessageService$$EnhancerBySpringCGLIB$$84bd2e9f.doStoreP2PMessage(<generated>)
	at com.lld.message.mq.StroeP2PMessageReceiver.onChatMessage(StroeP2PMessageReceiver.java:54)
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1673)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1592)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1580)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1571)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1515)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:994)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:941)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:85)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1319)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1225)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'to_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at jdk.internal.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy92.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at jdk.internal.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy90.update(Unknown Source)
	at com.baomidou.mybatisplus.core.executor.MybatisSimpleExecutor.doUpdate(MybatisSimpleExecutor.java:56)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at com.baomidou.mybatisplus.core.executor.MybatisCachingExecutor.update(MybatisCachingExecutor.java:85)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 50 common frames omitted
2025-05-04 17:20:24 -NACK_MSG:{"messageBody":{"appId":10000,"createTime":1746281994689,"delFlag":0,"messageBody":"666","messageKey":419390960959489,"messageTime":0,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"100","messageBody":"666","messageId":"3bf4a60f-de24-4caa-9479-9366848b9166","messageKey":419390960959489,"messageSequence":0,"messageTime":0}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282060144,"delFlag":0,"messageBody":"123","messageKey":419391099371521,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"0a8b6a14-0f43-4109-89e3-a1716275c61c","messageKey":419391099371521,"messageSequence":27,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282240645,"delFlag":0,"messageBody":"123","messageKey":419391476858881,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"8a9c0aa8-e34c-468b-86b1-9a6348c999e1","messageKey":419391476858881,"messageSequence":28,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282433219,"delFlag":0,"messageBody":"123","messageKey":419391881609217,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"8e4c76c7-c0b0-453e-8d8d-14bab388b0a4","messageKey":419391881609217,"messageSequence":29,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282434161,"delFlag":0,"messageBody":"123","messageKey":419391883706369,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"0d76f4c3-9e01-4ebe-b0fd-047a44fb151b","messageKey":419391883706369,"messageSequence":30,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282439311,"delFlag":0,"messageBody":"123","messageKey":419391894192129,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"9ec6f519-218b-4d5e-8536-3e0b5672694a","messageKey":419391894192129,"messageSequence":31,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746282448972,"delFlag":0,"messageBody":"123","messageKey":419391913066497,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123","messageId":"dbc1ee95-4e3c-4bfe-9c22-63fba28b237b","messageKey":419391913066497,"messageSequence":32,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345290773,"delFlag":0,"messageBody":"123123","messageKey":419523702292481,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"f31d0d97-8867-4055-8247-42229e2c0732","messageKey":419523702292481,"messageSequence":1,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345317594,"delFlag":0,"messageBody":"123123","messageKey":419523758915585,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"521a701f-7ebd-4595-8f71-ae2178853096","messageKey":419523758915585,"messageSequence":2,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345320772,"delFlag":0,"messageBody":"123123","messageKey":419523765207041,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"1eb3f8aa-a815-4f78-a61c-d0ef347d2a9d","messageKey":419523765207041,"messageSequence":3,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345409904,"delFlag":0,"messageBody":"123123","messageKey":419523951853569,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"02ca4ab6-080c-4a53-984a-1d6b6fb3b385","messageKey":419523951853569,"messageSequence":4,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345410194,"delFlag":0,"messageBody":"123123","messageKey":419523953950721,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"cad2bd70-ee5b-4195-8104-682d14d742ce","messageKey":419523953950721,"messageSequence":5,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345410426,"delFlag":0,"messageBody":"123123","messageKey":419523953950722,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"7d83969a-6059-4153-80db-cb62fb808592","messageKey":419523953950722,"messageSequence":6,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345410580,"delFlag":0,"messageBody":"123123","messageKey":419523953950723,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"b2840c02-217d-477d-b2f3-2904823c6f75","messageKey":419523953950723,"messageSequence":7,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345410840,"delFlag":0,"messageBody":"123123","messageKey":419523953950724,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"cdab49c3-916b-46ca-979a-20422b0d3ae5","messageKey":419523953950724,"messageSequence":8,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345411349,"delFlag":0,"messageBody":"123123","messageKey":419523956047873,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"b59df6e8-42b1-4f53-8d3f-0558c82a9bb8","messageKey":419523956047873,"messageSequence":9,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746345411488,"delFlag":0,"messageBody":"123123","messageKey":419523956047874,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"123123","messageId":"94f12c9f-8955-4aab-8a18-f35b318c0460","messageKey":419523956047874,"messageSequence":10,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349291396,"delFlag":0,"messageBody":"","messageKey":419532092997633,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"9726e7bf-6cc7-43e6-8112-6943c67f1b6c","messageKey":419532092997633,"messageSequence":11,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349291629,"delFlag":0,"messageBody":"","messageKey":419532092997634,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"846ea3f3-db74-4a38-a973-f400810841a1","messageKey":419532092997634,"messageSequence":12,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349291879,"delFlag":0,"messageBody":"","messageKey":419532092997635,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"420aaa4f-b13f-433b-939b-238af3a01090","messageKey":419532092997635,"messageSequence":13,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349387422,"delFlag":0,"messageBody":"","messageKey":419532294324225,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"6b49714f-1b0f-4866-8dd0-554296e87a4f","messageKey":419532294324225,"messageSequence":14,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349388781,"delFlag":0,"messageBody":"","messageKey":419532296421377,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"f8a13de9-ca87-4c6f-a9ed-17683608cad9","messageKey":419532296421377,"messageSequence":15,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349393623,"delFlag":0,"messageBody":"","messageKey":419532306907137,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"23e3b5f7-0f78-4aa7-8da8-223ce5268b65","messageKey":419532306907137,"messageSequence":17,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349389152,"delFlag":0,"messageBody":"","messageKey":419532298518529,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"3b90ba5e-e5f3-4b32-95f3-9deb06e07c57","messageKey":419532298518529,"messageSequence":16,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349540880,"delFlag":0,"messageBody":"","messageKey":419532615188481,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"e71f8ec1-6d12-4b23-abf6-32137271b19c","messageKey":419532615188481,"messageSequence":19,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349534121,"delFlag":0,"messageBody":"","messageKey":419532602605569,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"e7133deb-64c5-4a48-8a81-ca837feff634","messageKey":419532602605569,"messageSequence":18,"toId":"lld2"}}
2025-05-04 17:20:24 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746349541393,"delFlag":0,"messageBody":"","messageKey":419532617285633,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"5e525f71-9368-4f6b-8986-1c3868d16b2c","messageKey":419532617285633,"messageSequence":20,"toId":"lld2"}}
2025-05-04 17:22:46 -Waiting for workers to finish.
2025-05-04 17:22:46 -Waiting for workers to finish.
2025-05-04 17:22:47 -Successfully waited for workers to finish.
2025-05-04 17:22:47 -Successfully waited for workers to finish.
2025-05-04 17:22:47 -Shutdown ignored - container is already stopped
2025-05-04 17:22:47 -Shutdown ignored - container is already stopped
2025-05-04 17:22:47 -HikariPool-1 - Shutdown initiated...
2025-05-04 17:22:47 -HikariPool-1 - Shutdown completed.
2025-05-04 17:22:50 -Starting ImMessageStoreApplication using Java 11.0.24 on llleee with PID 40632 (D:\aaa\im-system\im-message-store\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 17:22:50 -The following 1 profile is active: "dev"
2025-05-04 17:22:51 -Tomcat initialized with port(s): 8080 (http)
2025-05-04 17:22:51 -Initializing ProtocolHandler ["http-nio-8080"]
2025-05-04 17:22:51 -Starting service [Tomcat]
2025-05-04 17:22:51 -Starting Servlet engine: [Apache Tomcat/9.0.69]
2025-05-04 17:22:51 -Initializing Spring embedded WebApplicationContext
2025-05-04 17:22:51 -Root WebApplicationContext: initialization completed in 518 ms
2025-05-04 17:22:52 -Starting ProtocolHandler ["http-nio-8080"]
2025-05-04 17:22:52 -Tomcat started on port(s): 8080 (http) with context path ''
2025-05-04 17:22:52 -Attempting to connect to: [localhost:5672]
2025-05-04 17:22:52 -Created new connection: rabbitConnectionFactory#7e191fda:0/SimpleConnection@6a7a1a0d [delegate=amqp://guest@127.0.0.1:5672/, localPort= 56988]
2025-05-04 17:22:52 -Started ImMessageStoreApplication in 1.645 seconds (JVM running for 2.138)
2025-05-04 17:22:59 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:22:59 -msg ack,msgId=e59e4813-1204-443e-8d99-7bda82b1558e,checkResut200
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","messageSequence":21},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419534794129409,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","messageSequence":21,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419534794129409,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","messageSequence":21,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 17:22:59 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746350579284,"delFlag":0,"messageBody":"","messageKey":419534794129409,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","messageKey":419534794129409,"messageSequence":21,"toId":"lld2"}}
2025-05-04 17:22:59 -CHAT MSG FORM QUEUE ::: {"toId":"lld","messageKey":419534794129409,"clientType":1,"appId":10000,"messageId":"e59e4813-1204-443e-8d99-7bda82b1558e","imei":"10000","messageSequence":21,"fromId":"lld2","command":1107}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419534794129409,"clientType":1,"appId":10000,"imei":"10000","messageSequence":21,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1107,"data":{"toId":"lld","messageKey":419534794129409,"clientType":1,"appId":10000,"imei":"10000","messageSequence":21,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:22:59 -CHAT MSG FORM QUEUE ::: {"toId":"lld","conversationType":0,"clientType":1,"appId":10000,"imei":"10000","messageSequence":21,"fromId":"lld2","command":1106}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":21,"fromId":"lld2"},"imei":"2222","toId":"lld"}
2025-05-04 17:22:59 -send message == {"appId":10000,"clientType":1,"command":1054,"data":{"conversationType":0,"toId":"lld","messageSequence":21,"fromId":"lld2"},"imei":"12313","toId":"lld"}
2025-05-04 17:22:59 -HikariPool-1 - Starting...
2025-05-04 17:22:59 -HikariPool-1 - Start completed.
2025-05-04 17:23:32 -CHAT MSG FORM QUEUE ::: {"toId":"lld2","clientType":1,"messageBody":"","appId":10000,"messageId":"908d1b89-cb9e-44fb-8fd7-718a26ac9cda","imei":"2222","fromId":"lld","command":1103}
2025-05-04 17:23:32 -msg ack,msgId=908d1b89-cb9e-44fb-8fd7-718a26ac9cda,checkResut200
2025-05-04 17:23:32 -send message == {"appId":10000,"clientType":1,"command":1046,"data":{"msg":"success","code":200,"data":{"messageId":"908d1b89-cb9e-44fb-8fd7-718a26ac9cda","messageSequence":22},"ok":true},"imei":"2222","toId":"lld"}
2025-05-04 17:23:32 -CHAT MSG FORM QUEUE ::: {"messageBody":{"appId":10000,"createTime":1746350612700,"delFlag":0,"messageBody":"","messageKey":419534863335425,"securityKey":""},"messageContent":{"appId":10000,"clientType":1,"fromId":"lld","imei":"2222","messageBody":"","messageId":"908d1b89-cb9e-44fb-8fd7-718a26ac9cda","messageKey":419534863335425,"messageSequence":22,"toId":"lld2"}}
2025-05-04 17:23:32 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419534863335425,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"908d1b89-cb9e-44fb-8fd7-718a26ac9cda","messageSequence":22,"fromId":"lld"},"imei":"12313","toId":"lld"}
2025-05-04 17:23:32 -send message == {"appId":10000,"clientType":1,"command":1103,"data":{"toId":"lld2","messageKey":419534863335425,"clientType":1,"messageBody":"","appId":10000,"imei":"2222","messageId":"908d1b89-cb9e-44fb-8fd7-718a26ac9cda","messageSequence":22,"fromId":"lld"},"imei":"10000","toId":"lld2"}
2025-05-04 18:13:42 -HV000001: Hibernate Validator 6.2.5.Final
2025-05-04 18:13:42 -Starting AppServiceApplication using Java 11.0.24 on llleee with PID 41928 (D:\BaiduNetdiskDownload\mksz626-Netty+SpringBoot开发即时通讯系统【完结第15章】\课件\课件\l-im-app-server-master\l-im-app-server\target\classes started by 86177 in D:\aaa\im-system)
2025-05-04 18:13:42 -The following 1 profile is active: "dev"
2025-05-04 18:13:42 -Tomcat initialized with port(s): 8989 (http)
2025-05-04 18:13:42 -Initializing ProtocolHandler ["http-nio-8989"]
2025-05-04 18:13:42 -Starting service [Tomcat]
2025-05-04 18:13:42 -Starting Servlet engine: [Apache Tomcat/9.0.68]
2025-05-04 18:13:42 -Initializing Spring embedded WebApplicationContext
2025-05-04 18:13:42 -Root WebApplicationContext: initialization completed in 773 ms
2025-05-04 18:13:43 -Starting ProtocolHandler ["http-nio-8989"]
2025-05-04 18:13:43 -Tomcat started on port(s): 8989 (http) with context path ''
2025-05-04 18:13:43 -Started AppServiceApplication in 1.765 seconds (JVM running for 2.646)
2025-05-04 18:15:02 -Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-04 18:15:02 -Initializing Servlet 'dispatcherServlet'
2025-05-04 18:15:02 -Completed initialization in 0 ms
2025-05-04 18:15:02 -HikariPool-1 - Starting...
2025-05-04 18:15:03 -HikariPool-1 - Exception during pool initialization.
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:448)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:265)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at org.app.service.impl.LoginServiceImpl$$EnhancerBySpringCGLIB$$2acf79ed.register(<generated>)
	at org.app.controller.LoginController.register(LoginController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:696)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2025-05-04 18:15:20 -HikariPool-1 - Starting...
2025-05-04 18:15:21 -HikariPool-1 - Exception during pool initialization.
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:448)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:265)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at org.app.service.impl.LoginServiceImpl$$EnhancerBySpringCGLIB$$2acf79ed.register(<generated>)
	at org.app.controller.LoginController.register(LoginController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:696)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2025-05-04 18:15:27 -HikariPool-1 - Starting...
2025-05-04 18:15:28 -HikariPool-1 - Exception during pool initialization.
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:828)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:448)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:241)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.jdbc.datasource.DataSourceTransactionManager.doBegin(DataSourceTransactionManager.java:265)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at org.app.service.impl.LoginServiceImpl$$EnhancerBySpringCGLIB$$2acf79ed.register(<generated>)
	at org.app.controller.LoginController.register(LoginController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:696)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2025-05-04 18:20:12 -Waiting for workers to finish.
2025-05-04 18:20:12 -Waiting for workers to finish.
2025-05-04 18:20:12 -Successfully waited for workers to finish.
2025-05-04 18:20:12 -Waiting for workers to finish.
2025-05-04 18:20:12 -Waiting for workers to finish.
2025-05-04 18:20:13 -Successfully waited for workers to finish.
2025-05-04 18:20:13 -Successfully waited for workers to finish.
2025-05-04 18:20:13 -Shutdown ignored - container is already stopped
2025-05-04 18:20:13 -Shutdown ignored - container is already stopped
2025-05-04 18:20:13 -HikariPool-1 - Shutdown initiated...
2025-05-04 18:20:13 -HikariPool-1 - Shutdown completed.
2025-05-04 18:20:13 -Successfully waited for workers to finish.
2025-05-04 18:20:13 -Shutdown ignored - container is already stopped
2025-05-04 18:20:13 -Shutdown ignored - container is already stopped
2025-05-04 18:20:13 -HikariPool-1 - Shutdown initiated...
2025-05-04 18:20:13 -HikariPool-1 - Shutdown completed.
